基于状态机模型，以太坊网络已变成一个依靠矿工维护的去中心化的大型状态机。在任意时刻，只会处于一个状态中，全世界唯一的状态。我们把这个状态机，称之为以太坊世界状态，代表着以太坊网络的全局状态。

世界状态\(state\)由无数的账户信息组成，每个账户均存在一个唯一的账户信息。账户信息中存储着账户余额、Nonce、合约哈希、账户状态等内容，每个账户信息通过账户地址影射。

使用简单的数据库来维护树的持久化内容，这个用来维护映射的数据库叫做 StateDB。

以太坊中有两种级别的状态，一个是顶级的世界状态，另一个是账户级的账户状态。

StateDB 有多种用途：

* 维护账户状态到世界状态的映射。

* 支持修改、回滚、提交状态。

* 支持持久化状态到数据库中。

* 是状态进出默克尔树的媒介。

![](/assets/statedb.png)

区块的状态数据并非保存在链上，而是将这些状态维护在默克尔压缩前缀树中，在区块链上仅记录对应的Trie Root 值。使用LevelDB维护树的持久化内容，而这个用来维护映射的数据库叫做 StateDB。

![](/assets/statedb-state.png)

* 世界状态
* 账户状态

StateDB-&gt;Trie-&gt;Account-&gt;stateObject

* Account - 存储的是账户状态信息。
* StateObject - 表示一个状态对象，可以从中获取到账户状态信息。
* StateDB - 用来存储状态对象。

从 StateDB 中取出 Trie 根，根据地址从 Trie 树中获取账户的 rlp 编码数据，再进行解码成 Account，然后根据 Account 生成stateObject

> Account 约等于 stateObject - 称之为账户状态
>
> StateDB 存储着所有 stateObject - 称之为世界状态

StateDB 是 Ethereum 中的账户存储『数据库』，所有账户在 Block 出块之后就确定下来，“固化”形成一棵 MPT 树，MPT 树根保存到 Block.Root 中，通过这个 Block.Root 可以恢复出在该区块点上时，整个 Ethereum 世界中所有账户的一个快照数据，包括：

账户的余额；

账户主动发起的交易次数；

对于合约账号，还有下面属性：

合约代码；

合约代码的 Hash 値；

合约中存储的数据的快照；

